---
// components/organisms/Navbar/SimpleNavbar.astro
import { UIComponents } from "../ui";
import site from "../../config/site.json";
import navbarConfig from "../../config/navbar.json";
import { useDesign } from "../../utils/useDesign";

const { Icon } = UIComponents;

const sticky = navbarConfig.sticky;
const stickyClass = sticky ? "sticky top-0 z-50" : "";

// Layout – loads from site.layout.defaultMaxWidth or from defaultDesign.layout.defaultMaxWidth
const maxWidth = useDesign("layout.defaultMaxWidth", "max-w-6xl");

// Navbar design values ​​with fallbacks
const wrapperClass = useDesign("navbar.simple.wrapper", "bg-white shadow-md");
const containerClass = useDesign("navbar.simple.container", "");
const textClass = useDesign("navbar.simple.text", "text-gray-700 font-medium");
const textHoverClass = useDesign("navbar.simple.textHover", "hover:text-gray-900");
const iconClass = useDesign("navbar.simple.icon", "w-5 h-5 text-gray-500");
const paddingClass = useDesign("navbar.simple.padding", "py-2 px-4");
const logoSizeClass = useDesign("navbar.simple.logo.size", "w-8 h-8");
const logoTextClass = useDesign("navbar.simple.logo.text", "text-white/80");

// Sticky classes

// Navigation items
const navItems = navbarConfig.nav || [];
---
<nav class={` ${wrapperClass} ${paddingClass} ${stickyClass} z-100`}>
  <div
    class={`mx-auto flex flex-col sm:flex-row items-center justify-between gap-4 ${containerClass} ${maxWidth}`}
  >
    <!-- Logo -->
    <a
      href={site.logo?.href || "/"}
      aria-label="Home"
      class={`flex flex-col sm:flex-row items-center justify-center gap-2 order-1 sm:order-none`}
    >
      <Icon name={site.logo?.name || "logo"} class={`inline-block ${logoSizeClass} ${textClass} text-center sm:text-left`} />
      <span class={`${logoTextClass}`}>{site.logo.text}</span>
    </a>

    <!-- Menu -->
    <ul class="flex flex-col sm:flex-row items-center gap-6 order-2 sm:order-none">
      {navItems.map(link => (
        <li key={link.href}>
          <a
            href={link.href}
            class={`flex items-center gap-2 ${textClass} ${textHoverClass} transition-colors`}
          >
            {link.icon && <Icon name={link.icon} class={` ${iconClass}`} />}
            <span>{link.label}</span>
          </a>
        </li>
      ))}
    </ul>
  </div>
</nav>
